/*
	stylus-boilerplate

	callouts.styl

	Author: Sean Goresht

	Calllouts (or text bubbles), which can be configured to point in any direction via class names
	@example
		.speech-bubble
			@extend $callout, $callout--top-right
*/

$calloutColour = white
$calloutPadding = 0.5em
$calloutTextColour = luminosity($calloutColour) > 0.5 ? black : white

$calloutBorderWidth = 1px
$calloutBorderStyle = solid
$calloutBorderColour = luminosity($calloutColour) > 0.5 ? $calloutColour - 25 : $calloutColour + 25

$calloutTipColour = luminosity($calloutColour) > 0.5 ? $calloutColour - 90 : $calloutColour + 90
$calloutTipSize = 0.5em
$calloutTipXPositions = left middle right
$calloutTipYPositions = top middle bottom
$calloutTipOffset = $calloutTipSize * -1

calloutTipPosition(x, y = false)
	&:before, &:after
		if x is middle
			left 50%
		else if x is right
			right 0
		else if x is left
			left 0
	if y
		if y is bottom
			&:before, &:after
				bottom $calloutTipOffset
				border-right $calloutTipSize $calloutBorderStyle transparent
				border-left $calloutTipSize $calloutBorderStyle transparent
				border-top $calloutTipSize $calloutBorderStyle $calloutTipColour
			&:after
				border-top $calloutTipSize $calloutBorderStyle $calloutColour
		else
			&:before, &:after
				top $calloutTipOffset
				border-right $calloutTipSize $calloutBorderStyle transparent
				border-bottom $calloutTipSize $calloutBorderStyle $calloutTipColour
				border-left $calloutTipSize $calloutBorderStyle transparent
			&:after
				border-bottom $calloutTipSize $calloutBorderStyle $calloutColour
	else
		top $calloutTipOffset

$callout
	color $calloutTextColour
	display inline-block
	position relative
	padding $calloutPadding
	background $calloutColour
	border $calloutBorderWidth $calloutBorderStyle $calloutBorderColour
	// genearte all types
	for horizontalPosition in $calloutTipXPositions
		for verticalPosition in $calloutTipYPositions
			&--{verticalPosition}-{horizontalPosition}
				calloutTipPosition(horizontalPosition, verticalPosition)
	&:before, &:after
		display inline-block
		position absolute
		content ""

.speech-bubble
	@extend $callout
	@extend $callout--top-left
	&-bottom
		@extend $callout, $callout--bottom-right
